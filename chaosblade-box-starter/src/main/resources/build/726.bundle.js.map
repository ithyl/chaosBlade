{"version":3,"file":"726.bundle.js","sources":["../726.bundle.js"],"sourcesContent":["(self[\"webpackChunk\"] = self[\"webpackChunk\"] || []).push([[726],{\n\n/***/ 42499:\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar react_1 = __importDefault(__webpack_require__(27378));\nvar next_1 = __webpack_require__(30156);\nvar classnames_1 = __importDefault(__webpack_require__(60042));\nvar hoist_non_react_statics_1 = __importDefault(__webpack_require__(55839));\nvar useCssVar_1 = __webpack_require__(67056);\nvar Table = function (_a) {\n    var _b;\n    var hasBorder = _a.hasBorder, rowSelection = _a.rowSelection, className = _a.className, restProps = __rest(_a, [\"hasBorder\", \"rowSelection\", \"className\"]);\n    var theme = useCssVar_1.useCssVar('--alicloudfe-components-theme');\n    var isWind = theme.trim() === 'wind';\n    if (hasBorder === undefined) {\n        // wind主题的默认值为true\n        hasBorder = isWind;\n    }\n    return (react_1.default.createElement(next_1.Table, __assign({ hasBorder: hasBorder, rowSelection: rowSelection, className: classnames_1.default(className, (_b = {},\n            // 对于有选择列的表格，我们增加一个类名，方便对这种表格进行样式覆盖\n            _b['with-row-select'] = !!rowSelection,\n            _b['is-wind'] = isWind,\n            _b)) }, restProps)));\n};\nhoist_non_react_statics_1.default(Table, next_1.Table);\nvar exported = Table;\nexports[\"default\"] = exported;\n\n\n/***/ }),\n\n/***/ 77726:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = __webpack_require__(24596);\n\nvar _Object$defineProperty = __webpack_require__(67394);\n\nvar _WeakMap = __webpack_require__(93168);\n\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(23587);\n\nvar _Object$keys = __webpack_require__(83452);\n\nvar _Object$getOwnPropertySymbols = __webpack_require__(95315);\n\nvar _Object$getOwnPropertyDescriptors = __webpack_require__(63774);\n\nvar _Object$defineProperties = __webpack_require__(92937);\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(17534), __webpack_require__(42499), __webpack_require__(17225), __webpack_require__(72153), __webpack_require__(77809), __webpack_require__(57379), __webpack_require__(81853), __webpack_require__(27378), __webpack_require__(66697), __webpack_require__(14798), __webpack_require__(68055), __webpack_require__(5282), __webpack_require__(99328), __webpack_require__(14870), __webpack_require__(73358)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var mod; }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports, _message, _table, _icon, _button, _asyncToGenerator2, _defineProperty2, _slicedToArray2, _react, _Translation, _i18n, _locale, _constants, _sreUtils, _sreUtilsDva, _Manage) {\n  \"use strict\";\n\n  var _interopRequireDefault = __webpack_require__(67971);\n\n  _Object$defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n\n  _exports[\"default\"] = Tools;\n  _message = _interopRequireDefault(_message);\n  _table = _interopRequireDefault(_table);\n  _icon = _interopRequireDefault(_icon);\n  _button = _interopRequireDefault(_button);\n  _asyncToGenerator2 = _interopRequireDefault(_asyncToGenerator2);\n  _defineProperty2 = _interopRequireDefault(_defineProperty2);\n  _slicedToArray2 = _interopRequireDefault(_slicedToArray2);\n  _react = _interopRequireWildcard(_react);\n  _Translation = _interopRequireDefault(_Translation);\n  _i18n = _interopRequireDefault(_i18n);\n  _locale = _interopRequireDefault(_locale);\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof _WeakMap !== \"function\") return null; var cacheBabelInterop = new _WeakMap(); var cacheNodeInterop = new _WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = _Object$defineProperty && _Object$getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { _Object$defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n  function Tools() {\n    var dispatch = (0, _sreUtilsDva.useDispatch)();\n    var parsed = (0, _sreUtils.parseQuery)();\n\n    var _useState = (0, _react.useState)([]),\n        _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n        dataSource = _useState2[0],\n        setDataSource = _useState2[1];\n\n    var _useState3 = (0, _react.useState)(null),\n        _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n        actionData = _useState4[0],\n        setActionData = _useState4[1];\n\n    var _useState5 = (0, _react.useState)(false),\n        _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n        isUpdate = _useState6[0],\n        setIsUpdate = _useState6[1];\n\n    var _useState7 = (0, _react.useState)(false),\n        _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n        loadingInstall = _useState8[0],\n        setLoadingInstall = _useState8[1];\n\n    var id = parsed.id,\n        mode = parsed.mode;\n    (0, _react.useEffect)(function () {\n      dispatch.pageHeader.setTitle(_i18n[\"default\"].t('Tool management').toString());\n      dispatch.pageHeader.showBackArrow(true);\n      dispatch.pageHeader.setBreadCrumbItems([_constants.DEFAULT_BREADCRUMB_ITEM].concat([_objectSpread({}, _Manage.breadCrumbConf[/\\agentmanage\\//.test(location.pathname) ? 'ahaos' : 'manage']), {\n        key: 'setting/tools',\n        value: _i18n[\"default\"].t('Tool management').toString(),\n        path: location.pathname\n      }]));\n    }, []);\n    (0, _react.useEffect)(function () {\n      (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return dispatch.agentTools.getChaosToolsList({\n                  installMode: mode,\n                  operateId: parsed.id\n                }, function (res) {\n                  res && setDataSource(res);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }, [isUpdate]);\n\n    function handleUninstall(_x) {\n      return _handleUninstall.apply(this, arguments);\n    }\n\n    function _handleUninstall() {\n      _handleUninstall = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(record) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.t0 = record;\n\n                if (!_context2.t0) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                _context2.next = 4;\n                return dispatch.agentTools.uninstallChaosTools({\n                  operateId: id,\n                  installMode: mode,\n                  name: record && record.name,\n                  version: record && record.latest\n                }, function (res) {\n                  res && _message[\"default\"].success(_i18n[\"default\"].t('Successful operation'));\n                  res && setIsUpdate(!isUpdate);\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _handleUninstall.apply(this, arguments);\n    }\n\n    function handleSubmit() {\n      return _handleSubmit.apply(this, arguments);\n    }\n\n    function _handleSubmit() {\n      _handleSubmit = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                setLoadingInstall(true);\n                actionData && dispatch.agentTools.installChaosTools({\n                  operateId: id,\n                  installMode: mode,\n                  toolsNamespace: 'chaosblade',\n                  name: actionData && actionData.name,\n                  version: actionData && actionData.latest\n                }, function (res) {\n                  if (res) {\n                    _message[\"default\"].success(_i18n[\"default\"].t('Successful operation'));\n\n                    setIsUpdate(!isUpdate);\n                  }\n\n                  setLoadingInstall(false);\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      return _handleSubmit.apply(this, arguments);\n    }\n\n    var renderAction = function renderAction(value, index, record) {\n      var installed = record.installed,\n          unInstalled = record.unInstalled;\n      record && setActionData(record);\n\n      if (installed) {\n        if (unInstalled) {\n          return /*#__PURE__*/_react[\"default\"].createElement(_button[\"default\"], {\n            text: true,\n            type: \"primary\",\n            onClick: function onClick() {\n              return handleUninstall(record);\n            }\n          }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall\"));\n        }\n\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Installed\"), /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'success',\n          size: \"small\"\n        }), \" \");\n      }\n\n      if (!installed) return /*#__PURE__*/_react[\"default\"].createElement(_button[\"default\"], {\n        text: true,\n        type: \"primary\",\n        loading: loadingInstall,\n        onClick: function onClick() {\n          return handleSubmit();\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Install\"));\n    };\n\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\n      hasBorder: false,\n      dataSource: dataSource,\n      locale: (0, _locale[\"default\"])().Table\n    }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Tool name').toString(),\n      dataIndex: \"name\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Latest version').toString(),\n      dataIndex: \"latest\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Description').toString(),\n      dataIndex: \"description\",\n      width: \"60%\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Operation').toString(),\n      cell: renderAction\n    })));\n  }\n});\n\n/***/ })\n\n}]);"],"mappings":"AAAA;","sourceRoot":""}