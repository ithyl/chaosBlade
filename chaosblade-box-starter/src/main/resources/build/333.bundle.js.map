{"version":3,"file":"333.bundle.js","sources":["../333.bundle.js"],"sourcesContent":["(self[\"webpackChunk\"] = self[\"webpackChunk\"] || []).push([[333],{\n\n/***/ 6885:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = __webpack_require__(24596);\n\nvar _Object$defineProperty = __webpack_require__(67394);\n\nvar _WeakMap = __webpack_require__(93168);\n\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(23587);\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(42499), __webpack_require__(17534), __webpack_require__(77809), __webpack_require__(17225), __webpack_require__(81853), __webpack_require__(57379), __webpack_require__(27378), __webpack_require__(66697), __webpack_require__(98784), __webpack_require__(60042), __webpack_require__(74590), __webpack_require__(14798), __webpack_require__(68055), __webpack_require__(52181), __webpack_require__(61253), __webpack_require__(9644), __webpack_require__(73262), __webpack_require__(99328), __webpack_require__(14870), __webpack_require__(42058)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var mod; }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports, _table, _message, _asyncToGenerator2, _icon, _slicedToArray2, _defineProperty2, _react, _Translation, _lodash, _classnames3, _DateUtil, _i18n, _locale, _index, _consoleComponentsActions, _ManualDialog, _FlowConstants, _sreUtils, _sreUtilsDva, _dva) {\n  \"use strict\";\n\n  var _interopRequireDefault = __webpack_require__(67971);\n\n  _Object$defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n\n  _exports[\"default\"] = void 0;\n  _table = _interopRequireDefault(_table);\n  _message = _interopRequireDefault(_message);\n  _asyncToGenerator2 = _interopRequireDefault(_asyncToGenerator2);\n  _icon = _interopRequireDefault(_icon);\n  _slicedToArray2 = _interopRequireDefault(_slicedToArray2);\n  _defineProperty2 = _interopRequireDefault(_defineProperty2);\n  _react = _interopRequireWildcard(_react);\n  _Translation = _interopRequireDefault(_Translation);\n  _lodash = _interopRequireDefault(_lodash);\n  _classnames3 = _interopRequireDefault(_classnames3);\n  _DateUtil = _interopRequireDefault(_DateUtil);\n  _i18n = _interopRequireDefault(_i18n);\n  _locale = _interopRequireDefault(_locale);\n  _index = _interopRequireDefault(_index);\n  _consoleComponentsActions = _interopRequireWildcard(_consoleComponentsActions);\n  _ManualDialog = _interopRequireDefault(_ManualDialog);\n\n  var _classnames, _classnames2;\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof _WeakMap !== \"function\") return null; var cacheBabelInterop = new _WeakMap(); var cacheNodeInterop = new _WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = _Object$defineProperty && _Object$getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { _Object$defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  var v_a_b_r = (0, _classnames3[\"default\"])((_classnames = {}, (0, _defineProperty2[\"default\"])(_classnames, _index[\"default\"].v_a_b, true), (0, _defineProperty2[\"default\"])(_classnames, _index[\"default\"].mr10, true), _classnames));\n  var v_a_b_r_r = (0, _classnames3[\"default\"])((_classnames2 = {}, (0, _defineProperty2[\"default\"])(_classnames2, _index[\"default\"].v_a_b, true), (0, _defineProperty2[\"default\"])(_classnames2, _index[\"default\"].mr10, true), (0, _defineProperty2[\"default\"])(_classnames2, _index[\"default\"].red, true), _classnames2));\n\n  function K8sRowRender(props) {\n    var history = (0, _dva.useHistory)();\n    var dispatch = (0, _sreUtilsDva.useDispatch)();\n    var uninstallStatusLoopInterval = (0, _react.useRef)({});\n    var installStatusLoopInterval = (0, _react.useRef)({});\n\n    var _useState = (0, _react.useState)(false),\n        _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n        showManualDialog = _useState2[0],\n        setShowManualDialog = _useState2[1]; // 手动卸载弹框\n\n\n    var _useState3 = (0, _react.useState)(''),\n        _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n        pluginType = _useState4[0],\n        setPluginType = _useState4[1];\n\n    var _useState5 = (0, _react.useState)(false),\n        _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n        isUninstall = _useState6[0],\n        setIsUninstall = _useState6[1];\n\n    var _useState7 = (0, _react.useState)(''),\n        _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n        configurationId = _useState8[0],\n        setConfigurationId = _useState8[1];\n\n    var _useState9 = (0, _react.useState)(NaN),\n        _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n        ostype = _useState10[0],\n        setOsType = _useState10[1];\n\n    var _useState11 = (0, _react.useState)(function () {\n      var _props$data$partNodes = props.data.partNodes,\n          partNodes = _props$data$partNodes === void 0 ? [] : _props$data$partNodes;\n      return partNodes || [];\n    }),\n        _useState12 = (0, _slicedToArray2[\"default\"])(_useState11, 2),\n        dataSource = _useState12[0],\n        setDataSource = _useState12[1]; // const [ total, setTotal ] = useState(() => {\n    //   const { nodeCount = 0 } = props.data;\n    //   return nodeCount || 0;\n    // });\n    // const [ page, setPage ] = useState(1);\n\n\n    var getData = props.getData;\n\n    var renderStatus = function renderStatus(value) {\n      if (value === _FlowConstants.AGENT_STATUS.ONLINE) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"select\",\n          className: (0, _classnames3[\"default\"])(_index[\"default\"].onLineState, _index[\"default\"].icon)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Online\"));\n      }\n\n      if (value === _FlowConstants.AGENT_STATUS.WAIT_INSTALL) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"minus-circle-fill\",\n          className: (0, _classnames3[\"default\"])(_index[\"default\"].icon, _index[\"default\"].notInstall)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Not Installed\"));\n      }\n\n      if (value === _FlowConstants.AGENT_STATUS.OFFLINE) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"exclamationcircle-f\",\n          className: (0, _classnames3[\"default\"])(_index[\"default\"].icon, _index[\"default\"].offLineState)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Offline\"));\n      }\n    };\n\n    var renderNodeIp = function renderNodeIp(value, index, record) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _index[\"default\"].href,\n        onClick: function onClick() {\n          (0, _sreUtils.pushUrl)(history, '/chaos/experiment/scope/detail', {\n            id: record.configurationId,\n            type: _FlowConstants.SCOPE_TYPE.K8S\n          });\n        }\n      }, value);\n    }; // function handlePageChange(current: number) {\n    //   const { clusterId = '' } = props.data;\n    //   setPage(current);\n    //   (async function() {\n    //     const { Data = false } = await dispatch.scopesControl.getListExperimentNodesByCluster({\n    //       cluster_id: clusterId,\n    //       page,\n    //       size: 10,\n    //     });\n    //     setDataSource(Data && Data.data);\n    //     setTotal(Data && Data.total);\n    //   })();\n    // }\n    // 卸载\n\n\n    var handleUninstall = (0, _react.useCallback)( /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee(configurationId, deviceId) {\n        var _yield$dispatch$agent, _yield$dispatch$agent2, Data, _dataSource;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return dispatch.agentSetting.getUninstallPlugin({\n                  ConfigurationId: configurationId\n                });\n\n              case 2:\n                _yield$dispatch$agent = _context.sent;\n                _yield$dispatch$agent2 = _yield$dispatch$agent.Data;\n                Data = _yield$dispatch$agent2 === void 0 ? false : _yield$dispatch$agent2;\n\n                if (Data) {\n                  _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n                  _dataSource.forEach(function (item) {\n                    if (item.deviceId === deviceId) {\n                      item.pluginStatus = 4;\n                    }\n                  }); // 更新状态为卸载中\n\n\n                  setDataSource(_dataSource);\n                  uninstallStatusLoopInterval.current[deviceId] = setInterval(function () {\n                    handleStatusLoop(dataSource, deviceId);\n                  }, 2000);\n                  setTimeout(function () {\n                    handleUninstallOvertime(dataSource, deviceId);\n                  }, 61000);\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }(), [dataSource]); // 卸载超时\n\n    var handleUninstallOvertime = function handleUninstallOvertime(_dataSource, deviceId) {\n      if (!uninstallStatusLoopInterval.current[deviceId]) return; // 超时码999\n\n      handleUninstallFailed(_dataSource, deviceId, 999);\n      clearInterval(uninstallStatusLoopInterval.current[deviceId]);\n      clearInterval(installStatusLoopInterval.current[deviceId]);\n    }; // 卸载失败\n\n\n    var handleUninstallFailed = function handleUninstallFailed(dataSource, deviceId, status) {\n      var _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n      var pluginStatus = status || -1;\n\n      _dataSource.forEach(function (item) {\n        if (item.deviceId === deviceId) {\n          item.pluginStatus = pluginStatus;\n        }\n      });\n\n      setDataSource(_dataSource);\n    }; // 循环\n\n\n    var handleStatusLoop = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(dataSource, deviceId) {\n        var _yield$dispatch$agent3, _yield$dispatch$agent4, Data, data, _dataSource;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return dispatch.agentSetting.getQueryPluginStatus({\n                  Loop: true,\n                  InstanceId: deviceId\n                });\n\n              case 2:\n                _yield$dispatch$agent3 = _context2.sent;\n                _yield$dispatch$agent4 = _yield$dispatch$agent3.Data;\n                Data = _yield$dispatch$agent4 === void 0 ? {} : _yield$dispatch$agent4;\n\n                if (!_lodash[\"default\"].isEmpty(Data)) {\n                  data = Data;\n                  _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n                  _dataSource.forEach(function (pluginItem) {\n                    if (pluginItem.deviceId === data.deviceId) {\n                      pluginItem.pluginStatus = data.pluginStatus;\n                    }\n                  });\n\n                  setDataSource(_dataSource);\n\n                  if (data.pluginStatus === 0) {\n                    clearInterval(uninstallStatusLoopInterval.current[deviceId]);\n                    uninstallStatusLoopInterval.current[deviceId] = null;\n                  }\n\n                  if (data.pluginStatus === 2 || data.pluginStatus === -1) {\n                    clearInterval(installStatusLoopInterval.current[deviceId]);\n                    installStatusLoopInterval.current[deviceId] = null;\n                    getData();\n                  }\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function handleStatusLoop(_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }(); // 手动卸载\n\n\n    var toggleManualDialog = function toggleManualDialog(pluginType, isUninstall, configurationId, ostype) {\n      setShowManualDialog(!showManualDialog);\n      setPluginType(pluginType);\n      setIsUninstall(isUninstall);\n      setConfigurationId(configurationId);\n      setOsType(ostype);\n    }; // 安装\n\n\n    var handleInstall = (0, _react.useCallback)( /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(deviceId) {\n        var _yield$dispatch$agent5, _yield$dispatch$agent6, Data, _yield$dispatch$agent7, Code, _dataSource, msg;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return dispatch.agentSetting.getInstallPlugin({\n                  InstanceId: deviceId\n                });\n\n              case 2:\n                _yield$dispatch$agent5 = _context3.sent;\n                _yield$dispatch$agent6 = _yield$dispatch$agent5.Data;\n                Data = _yield$dispatch$agent6 === void 0 ? false : _yield$dispatch$agent6;\n                _yield$dispatch$agent7 = _yield$dispatch$agent5.Code;\n                Code = _yield$dispatch$agent7 === void 0 ? '' : _yield$dispatch$agent7;\n\n                if (Data) {\n                  _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n                  _dataSource.forEach(function (item) {\n                    if (item.deviceId === deviceId) {\n                      item.pluginStatus = 1;\n                    }\n                  }); // 更新状态为安装中\n\n\n                  setDataSource(_dataSource);\n                  installStatusLoopInterval.current[deviceId] = setInterval(function () {\n                    handleStatusLoop(dataSource, deviceId);\n                  }, 2000);\n                } else {\n                  msg = _i18n[\"default\"].t('Operation failed');\n\n                  if (Code === 'plugin.instance.not.exist') {\n                    msg = _i18n[\"default\"].t('The current instance does not exist, please select an available instance');\n                  }\n\n                  _message[\"default\"].error(msg);\n                }\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x5) {\n        return _ref3.apply(this, arguments);\n      };\n    }(), [dataSource]); // 开始 停止\n    // const handleEnableSwitch = useCallback(async (record: any, index: number) => {\n    //   const action = record.enable ? 'StopPlugin' : 'StartPlugin';\n    //   const msg = record.enable ? '停止成功' : '开启成功';\n    //   const msgError = record.enable ? '停止失败' : '开启失败';\n    //   const { Data = false } = await dispatch.agentSetting.getStopAndStartPlugin(action, {\n    //     PluginType: record.pluginType,\n    //     ConfigurationId: record.configurationId,\n    //   });\n    //   if (Data === true) {\n    //     Message.success(msg);\n    //     record.enable = !record.enable;\n    //     const _dataSource: any[] = _.cloneDeep(dataSource);\n    //     _dataSource[index] = record;\n    //     setDataSource(_dataSource);\n    //   } else {\n    //     Message.error(msgError);\n    //   }\n    // }, [ dataSource ]);\n\n    var renderOption = function renderOption(value, index, record) {\n      var osType = record.osType,\n          pluginStatus = record.pluginStatus,\n          configurationId = record.configurationId,\n          pluginType = record.pluginType,\n          deviceId = record.deviceId,\n          canAutoInstall = record.canAutoInstall;\n      var btns = {\n        // clickUninstallBtn: <LinkButton onClick={() => toggleManualDialog(pluginType, true, configurationId, osType)}>手动卸载</LinkButton>,\n        // autoUninstallBtn: <LinkButton onClick={() => handleUninstall(configurationId, deviceId)}>卸载</LinkButton>,\n        // startOrStopBtn: <LinkButton onClick={() => handleEnableSwitch(record, index)}>{ enable ? '停止' : '开启' }</LinkButton>,\n        installBtn: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: _index[\"default\"].red\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n          className: _index[\"default\"].ml10,\n          onClick: function onClick() {\n            return handleInstall(deviceId);\n          },\n          style: {\n            cursor: 'pointer'\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Click install\"))),\n        clinkInstallBtn: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: _index[\"default\"].red\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n          className: _index[\"default\"].ml10,\n          onClick: function onClick() {\n            return toggleManualDialog(pluginType, false, configurationId, osType);\n          },\n          style: {\n            cursor: 'pointer'\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Manual installation\"))),\n        tryBtn: /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n          onClick: function onClick() {\n            return handleUninstall(configurationId, deviceId);\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Retry\")),\n        uninstallSuccess: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstalled successfully\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'success',\n          size: \"small\"\n        })),\n        installLoading: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: _index[\"default\"].mr10\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Installing\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'loading',\n          size: \"small\"\n        })),\n        uninstallLoading: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstalling\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'loading',\n          size: \"small\"\n        })),\n        uninstallFault: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall failed\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'error',\n          size: \"small\"\n        })),\n        outTime: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall Timeout\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'error',\n          size: \"small\"\n        }))\n      };\n      var btnKeys = [];\n\n      switch (pluginStatus) {\n        case 0:\n          btnKeys = ['monitorBtn', 'uninstallSuccess'];\n          break;\n\n        case 1:\n          btnKeys = ['monitorBtn', 'installLoading'];\n          break;\n\n        case 2:\n          btnKeys = ['monitorBtn'];\n\n          if (/CHAOS_AGENT/i.test(pluginType)) {\n            btnKeys.push('startOrStopBtn');\n          }\n\n          btnKeys.push(canAutoInstall ? 'autoUninstallBtn' : 'clickUninstallBtn');\n          break;\n\n        case 3:\n          btnKeys = ['monitorBtn'];\n          btnKeys.push(canAutoInstall ? 'installBtn' : 'clinkInstallBtn');\n          break;\n\n        case 4:\n          btnKeys = ['monitorBtn', 'uninstallLoading'];\n          break;\n\n        case 5:\n          btnKeys = ['monitorBtn', 'uninstallFault', 'tryBtn', 'clickUninstallBtn'];\n          break;\n\n        case 999:\n          btnKeys = ['monitorBtn', 'outTime', 'tryBtn', 'clickUninstallBtn'];\n          break;\n\n        case -1:\n          btnKeys = ['monitorBtn', 'uninstallFault', 'tryBtn', 'clinkInstallBtn'];\n          break;\n\n        default:\n          break;\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions[\"default\"], {\n        style: {\n          justifyContent: 'center'\n        }\n      }, btnKeys.map(function (item) {\n        return btns[item];\n      }));\n    };\n\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\n      dataSource: dataSource,\n      hasBorder: false,\n      locale: (0, _locale[\"default\"])().Table\n    }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: \"\",\n      dataIndex: \"deviceId\",\n      width: 50,\n      cell: null\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Node IP').toString(),\n      dataIndex: \"privateIp\",\n      cell: renderNodeIp\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Node connection time').toString(),\n      dataIndex: \"connectTime\",\n      cell: _DateUtil[\"default\"]\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Device ID').toString(),\n      dataIndex: \"configurationId\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Node Probe Version').toString(),\n      dataIndex: \"agentVersion\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Node Probe Status').toString(),\n      dataIndex: \"agentStatus\",\n      cell: renderStatus\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: \"\",\n      lock: \"right\",\n      align: 'center',\n      width: 160,\n      cell: renderOption\n    })), showManualDialog && /*#__PURE__*/_react[\"default\"].createElement(_ManualDialog[\"default\"], {\n      pluginType: pluginType,\n      isUninstall: isUninstall,\n      configurationId: configurationId,\n      onClose: function onClose() {\n        return setShowManualDialog(false);\n      },\n      ostype: ostype\n    }));\n  }\n\n  var _default = /*#__PURE__*/(0, _react.memo)(K8sRowRender);\n\n  _exports[\"default\"] = _default;\n});\n\n/***/ }),\n\n/***/ 87641:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = __webpack_require__(24596);\n\nvar _Object$defineProperty = __webpack_require__(67394);\n\nvar _WeakMap = __webpack_require__(93168);\n\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(23587);\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(93484), __webpack_require__(42499), __webpack_require__(94188), __webpack_require__(17225), __webpack_require__(17534), __webpack_require__(77809), __webpack_require__(81853), __webpack_require__(57379), __webpack_require__(27378), __webpack_require__(66697), __webpack_require__(98784), __webpack_require__(60042), __webpack_require__(74590), __webpack_require__(14798), __webpack_require__(68055), __webpack_require__(52181), __webpack_require__(61253), __webpack_require__(9644), __webpack_require__(73262), __webpack_require__(99328), __webpack_require__(42058), __webpack_require__(14870)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var mod; }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports, _pagination, _table, _search, _icon, _message, _asyncToGenerator2, _slicedToArray2, _defineProperty2, _react, _Translation, _lodash, _classnames3, _DateUtil, _i18n, _locale, _index, _consoleComponentsActions, _ManualDialog, _FlowConstants, _sreUtils, _dva, _sreUtilsDva) {\n  \"use strict\";\n\n  var _interopRequireDefault = __webpack_require__(67971);\n\n  _Object$defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n\n  _exports[\"default\"] = void 0;\n  _pagination = _interopRequireDefault(_pagination);\n  _table = _interopRequireDefault(_table);\n  _search = _interopRequireDefault(_search);\n  _icon = _interopRequireDefault(_icon);\n  _message = _interopRequireDefault(_message);\n  _asyncToGenerator2 = _interopRequireDefault(_asyncToGenerator2);\n  _slicedToArray2 = _interopRequireDefault(_slicedToArray2);\n  _defineProperty2 = _interopRequireDefault(_defineProperty2);\n  _react = _interopRequireWildcard(_react);\n  _Translation = _interopRequireDefault(_Translation);\n  _lodash = _interopRequireDefault(_lodash);\n  _classnames3 = _interopRequireDefault(_classnames3);\n  _DateUtil = _interopRequireDefault(_DateUtil);\n  _i18n = _interopRequireDefault(_i18n);\n  _locale = _interopRequireDefault(_locale);\n  _index = _interopRequireDefault(_index);\n  _consoleComponentsActions = _interopRequireWildcard(_consoleComponentsActions);\n  _ManualDialog = _interopRequireDefault(_ManualDialog);\n\n  var _classnames, _classnames2;\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof _WeakMap !== \"function\") return null; var cacheBabelInterop = new _WeakMap(); var cacheNodeInterop = new _WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = _Object$defineProperty && _Object$getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { _Object$defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  var v_a_b_r = (0, _classnames3[\"default\"])((_classnames = {}, (0, _defineProperty2[\"default\"])(_classnames, _index[\"default\"].v_a_b, true), (0, _defineProperty2[\"default\"])(_classnames, _index[\"default\"].mr10, true), _classnames));\n  var v_a_b_r_r = (0, _classnames3[\"default\"])((_classnames2 = {}, (0, _defineProperty2[\"default\"])(_classnames2, _index[\"default\"].v_a_b, true), (0, _defineProperty2[\"default\"])(_classnames2, _index[\"default\"].mr10, true), (0, _defineProperty2[\"default\"])(_classnames2, _index[\"default\"].red, true), _classnames2));\n\n  var HostTable = function HostTable(props) {\n    var currTab = props.currTab,\n        empty = props.empty,\n        changeSuccessNumber = props.changeSuccessNumber;\n    var pageSize = 10;\n\n    var _useState = (0, _react.useState)(1),\n        _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n        page = _useState2[0],\n        setPage = _useState2[1];\n\n    var _useState3 = (0, _react.useState)(0),\n        _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n        total = _useState4[0],\n        setTotal = _useState4[1];\n\n    var _useState5 = (0, _react.useState)('0'),\n        _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n        filterValue = _useState6[0],\n        setFilterValue = _useState6[1];\n\n    var _useState7 = (0, _react.useState)(''),\n        _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n        searchKey = _useState8[0],\n        setSearchKey = _useState8[1];\n\n    var _useState9 = (0, _react.useState)([]),\n        _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n        dataSource = _useState10[0],\n        setDataSource = _useState10[1];\n\n    var _useState11 = (0, _react.useState)(false),\n        _useState12 = (0, _slicedToArray2[\"default\"])(_useState11, 2),\n        showManualDialog = _useState12[0],\n        setShowManualDialog = _useState12[1]; // 手动卸载弹框\n\n\n    var _useState13 = (0, _react.useState)(''),\n        _useState14 = (0, _slicedToArray2[\"default\"])(_useState13, 2),\n        pluginType = _useState14[0],\n        setPluginType = _useState14[1];\n\n    var _useState15 = (0, _react.useState)(false),\n        _useState16 = (0, _slicedToArray2[\"default\"])(_useState15, 2),\n        isUninstall = _useState16[0],\n        setIsUninstall = _useState16[1];\n\n    var _useState17 = (0, _react.useState)(undefined),\n        _useState18 = (0, _slicedToArray2[\"default\"])(_useState17, 2),\n        isInstall = _useState18[0],\n        setIsInstall = _useState18[1];\n\n    var _useState19 = (0, _react.useState)(''),\n        _useState20 = (0, _slicedToArray2[\"default\"])(_useState19, 2),\n        configurationId = _useState20[0],\n        setConfigurationId = _useState20[1];\n\n    var _useState21 = (0, _react.useState)(NaN),\n        _useState22 = (0, _slicedToArray2[\"default\"])(_useState21, 2),\n        ostype = _useState22[0],\n        setOsType = _useState22[1];\n\n    var uninstallStatusLoopInterval = (0, _react.useRef)({});\n    var installStatusLoopInterval = (0, _react.useRef)({});\n\n    var _useSelector = (0, _sreUtilsDva.useSelector)(function (state) {\n      return {\n        loading: state.loading.effects['scopesControl/getExperimentScopes']\n      };\n    }),\n        loading = _useSelector.loading;\n\n    var dispatch = (0, _sreUtilsDva.useDispatch)();\n    var history = (0, _dva.useHistory)();\n    (0, _react.useEffect)(function () {\n      setPage(1);\n    }, [currTab]);\n    (0, _react.useEffect)(function () {\n      if (currTab !== _FlowConstants.SCOPE_TYPE.HOST) {\n        return;\n      }\n\n      getData();\n    }, [currTab, page, filterValue, searchKey]);\n    (0, _react.useEffect)(function () {\n      var successData = dataSource.filter(function (x) {\n        return x.agentStatus === _FlowConstants.AGENT_STATUS.ONLINE;\n      }).length;\n      changeSuccessNumber(currTab, \"\".concat(successData, \"/\").concat(total));\n    }, [total]);\n\n    var getData = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$dispatch$scope, _yield$dispatch$scope2, Data, datas;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return dispatch.scopesControl.getExperimentScopes({\n                  scope_type: currTab,\n                  filter: {\n                    type: filterValue,\n                    key: searchKey\n                  },\n                  size: pageSize,\n                  page: page\n                });\n\n              case 2:\n                _yield$dispatch$scope = _context.sent;\n                _yield$dispatch$scope2 = _yield$dispatch$scope.Data;\n                Data = _yield$dispatch$scope2 === void 0 ? false : _yield$dispatch$scope2;\n                datas = _lodash[\"default\"].get(Data, 'data', []);\n                setDataSource(datas);\n                setTotal((Data === null || Data === void 0 ? void 0 : Data.total) || 0);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getData() {\n        return _ref.apply(this, arguments);\n      };\n    }(); // 卸载\n\n\n    var handleUninstall = (0, _react.useCallback)( /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(configurationId, deviceId) {\n        var _yield$dispatch$agent, _yield$dispatch$agent2, Data, _dataSource;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return dispatch.agentSetting.getUninstallPlugin({\n                  ConfigurationId: configurationId\n                });\n\n              case 2:\n                _yield$dispatch$agent = _context2.sent;\n                _yield$dispatch$agent2 = _yield$dispatch$agent.Data;\n                Data = _yield$dispatch$agent2 === void 0 ? false : _yield$dispatch$agent2;\n\n                if (Data) {\n                  _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n                  _dataSource.forEach(function (item) {\n                    if (item.deviceId === deviceId) {\n                      item.pluginStatus = 4;\n                    }\n                  }); // 更新状态为卸载中\n\n\n                  setDataSource(_dataSource);\n                  uninstallStatusLoopInterval.current[deviceId] = setInterval(function () {\n                    handleStatusLoop(dataSource, deviceId);\n                  }, 2000);\n                  setTimeout(function () {\n                    handleUninstallOvertime(dataSource, deviceId);\n                  }, 61000);\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }(), [dataSource]); // 卸载超时\n\n    var handleUninstallOvertime = function handleUninstallOvertime(_dataSource, deviceId) {\n      if (!uninstallStatusLoopInterval.current[deviceId]) return; // 超时码999\n\n      handleUninstallFailed(_dataSource, deviceId, 999);\n      clearInterval(uninstallStatusLoopInterval.current[deviceId]);\n      clearInterval(installStatusLoopInterval.current[deviceId]);\n    }; // 卸载失败\n\n\n    var handleUninstallFailed = function handleUninstallFailed(dataSource, deviceId, status) {\n      var _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n      var pluginStatus = status || -1;\n\n      _dataSource.forEach(function (item) {\n        if (item.deviceId === deviceId) {\n          item.pluginStatus = pluginStatus;\n        }\n      });\n\n      setDataSource(_dataSource);\n    }; // 循环\n\n\n    var handleStatusLoop = /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(dataSource, deviceId) {\n        var _yield$dispatch$agent3, _yield$dispatch$agent4, Data, data, _dataSource;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return dispatch.agentSetting.getQueryPluginStatus({\n                  Loop: true,\n                  InstanceId: deviceId\n                });\n\n              case 2:\n                _yield$dispatch$agent3 = _context3.sent;\n                _yield$dispatch$agent4 = _yield$dispatch$agent3.Data;\n                Data = _yield$dispatch$agent4 === void 0 ? {} : _yield$dispatch$agent4;\n\n                if (!_lodash[\"default\"].isEmpty(Data)) {\n                  data = Data;\n                  _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n                  _dataSource.forEach(function (pluginItem) {\n                    if (pluginItem.deviceId === data.deviceId) {\n                      pluginItem.pluginStatus = data.pluginStatus;\n                    }\n                  });\n\n                  setDataSource(_dataSource);\n\n                  if (data.pluginStatus === 0) {\n                    clearInterval(uninstallStatusLoopInterval.current[deviceId]);\n                    uninstallStatusLoopInterval.current[deviceId] = null;\n                    getData();\n                  }\n\n                  if (data.pluginStatus === 2 || data.pluginStatus === -1) {\n                    clearInterval(installStatusLoopInterval.current[deviceId]);\n                    installStatusLoopInterval.current[deviceId] = null;\n                    getData();\n                  }\n                }\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function handleStatusLoop(_x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }(); // 手动卸载\n\n\n    var toggleManualDialog = function toggleManualDialog(pluginType, isUninstall, configurationId, ostype) {\n      setShowManualDialog(!showManualDialog);\n      setPluginType(pluginType);\n      setIsUninstall(isUninstall);\n      setConfigurationId(configurationId);\n      setOsType(ostype);\n    }; // 安装\n\n\n    var handleInstall = (0, _react.useCallback)( /*#__PURE__*/function () {\n      var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(deviceId) {\n        var _yield$dispatch$agent5, _yield$dispatch$agent6, Data, _yield$dispatch$agent7, Code, _dataSource, msg;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return dispatch.agentSetting.getInstallPlugin({\n                  InstanceId: deviceId\n                });\n\n              case 2:\n                _yield$dispatch$agent5 = _context4.sent;\n                _yield$dispatch$agent6 = _yield$dispatch$agent5.Data;\n                Data = _yield$dispatch$agent6 === void 0 ? false : _yield$dispatch$agent6;\n                _yield$dispatch$agent7 = _yield$dispatch$agent5.Code;\n                Code = _yield$dispatch$agent7 === void 0 ? '' : _yield$dispatch$agent7;\n\n                if (Data) {\n                  _dataSource = _lodash[\"default\"].cloneDeep(dataSource);\n\n                  _dataSource.forEach(function (item) {\n                    if (item.deviceId === deviceId) {\n                      item.pluginStatus = 1;\n                    }\n                  }); // 更新状态为安装中\n\n\n                  setDataSource(_dataSource);\n                  installStatusLoopInterval.current[deviceId] = setInterval(function () {\n                    handleStatusLoop(dataSource, deviceId);\n                  }, 2000);\n                } else {\n                  msg = /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \" Operation failed\");\n\n                  if (Code === 'plugin.instance.not.exist') {\n                    msg = /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"The current instance does not exist, please select an available instance\");\n                  }\n\n                  _message[\"default\"].error(msg);\n                }\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x5) {\n        return _ref4.apply(this, arguments);\n      };\n    }(), [dataSource]); // 手动安装\n\n    var onClickInstall = function onClickInstall(pluginType, isUninstall, configurationId, ostype) {\n      toggleManualDialog(pluginType, false, configurationId, ostype);\n      setIsInstall(true);\n    };\n    /** table 操作 按钮 */\n\n\n    var renderOption = function renderOption(value, index, record) {\n      var osType = record.osType,\n          pluginStatus = record.pluginStatus,\n          configurationId = record.configurationId,\n          pluginType = record.pluginType,\n          deviceId = record.deviceId,\n          canAutoInstall = record.canAutoInstall,\n          installMode = record.installMode;\n      var btns = {\n        clickUninstallBtn: /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n          onClick: function onClick() {\n            return toggleManualDialog(pluginType, true, configurationId, osType);\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall manually\")),\n        autoUninstallBtn: /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n          onClick: function onClick() {\n            return handleUninstall(configurationId, deviceId);\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall\")),\n        // startOrStopBtn: <LinkButton onClick={() => handleEnableSwitch(record, index)}>{ enable ? '停止' : '开启' }</LinkButton>,\n        installBtn: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: _index[\"default\"].red\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n          className: _index[\"default\"].ml10,\n          onClick: function onClick() {\n            return handleInstall(deviceId);\n          },\n          style: {\n            cursor: 'pointer'\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Click install\"))),\n        clinkInstallBtn: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: _index[\"default\"].red\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n          className: _index[\"default\"].ml10,\n          onClick: function onClick() {\n            return onClickInstall(pluginType, false, configurationId, osType);\n          },\n          style: {\n            cursor: 'pointer'\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Manual installation\"))),\n        tryBtn: /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n          onClick: function onClick() {\n            return handleUninstall(configurationId, deviceId);\n          }\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Retry\")),\n        uninstallSuccess: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstalled successfully\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'success',\n          size: \"small\"\n        })),\n        installLoading: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: _index[\"default\"].mr10\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Installing\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'loading',\n          size: \"small\"\n        })),\n        uninstallLoading: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstalling\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'loading',\n          size: \"small\"\n        })),\n        uninstallFault: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall failed\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'error',\n          size: \"small\"\n        })),\n        outTime: /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          className: v_a_b_r_r\n        }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall Timeout\"), \" \", /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: 'error',\n          size: \"small\"\n        }))\n      };\n      var btnKeys = [];\n\n      switch (pluginStatus) {\n        case 0:\n          btnKeys = ['uninstallSuccess'];\n          break;\n\n        case 1:\n          btnKeys = ['installLoading'];\n          break;\n\n        case 2:\n          btnKeys = ['monitorBtn'];\n\n          if (/CHAOS_AGENT/i.test(pluginType)) {\n            btnKeys.push('startOrStopBtn');\n          }\n\n          btnKeys.push(canAutoInstall ? 'autoUninstallBtn' : 'clickUninstallBtn');\n          break;\n\n        case 3:\n          btnKeys.push(canAutoInstall ? 'installBtn' : 'clinkInstallBtn');\n          break;\n\n        case 4:\n          btnKeys = ['uninstallLoading'];\n          break;\n\n        case 5:\n          btnKeys = ['uninstallFault', 'tryBtn', 'clickUninstallBtn'];\n          break;\n\n        case 999:\n          btnKeys = ['outTime', 'tryBtn', 'clickUninstallBtn'];\n          break;\n\n        case -1:\n          btnKeys = ['uninstallFault', 'tryBtn', 'clinkInstallBtn'];\n          break;\n\n        default:\n          break;\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions[\"default\"], {\n        style: {\n          justifyContent: 'center'\n        }\n      }, btnKeys.map(function (item) {\n        return btns[item];\n      }), /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n        onClick: function onClick() {\n          (0, _sreUtils.pushUrl)(history, '/chaos/agentmanage/setting/tools', {\n            id: configurationId,\n            mode: installMode\n          });\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Install the walkthrough tool\")));\n    };\n\n    function handleFilterChange(value) {\n      setFilterValue(value);\n      setPage(1);\n    }\n\n    function handleSearch(value) {\n      setSearchKey(value);\n      setPage(1);\n    }\n\n    var renderName = function renderName(value, index, record) {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _index[\"default\"].href,\n        onClick: function onClick() {\n          (0, _sreUtils.pushUrl)(history, '/chaos/experiment/scope/detail', {\n            id: record.configurationId\n          });\n          (0, _sreUtils.removeParams)('configurationId');\n        }\n      }, value);\n    };\n\n    var renderIsexperiment = function renderIsexperiment(value) {\n      return value ? _i18n[\"default\"].t('Yes') : _i18n[\"default\"].t('No');\n    };\n\n    var renderStatus = function renderStatus(value) {\n      if (value === _FlowConstants.AGENT_STATUS.ONLINE) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"select\",\n          className: (0, _classnames3[\"default\"])(_index[\"default\"].onLineState, _index[\"default\"].icon)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Online\"));\n      }\n\n      if (value === _FlowConstants.AGENT_STATUS.WAIT_INSTALL) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"minus-circle-fill\",\n          className: (0, _classnames3[\"default\"])(_index[\"default\"].icon, _index[\"default\"].notInstall)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Not Installed\"));\n      }\n\n      if (value === _FlowConstants.AGENT_STATUS.OFFLINE) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"exclamationcircle-f\",\n          className: (0, _classnames3[\"default\"])(_index[\"default\"].icon, _index[\"default\"].offLineState)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Offline\"));\n      }\n    };\n\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: _index[\"default\"].tabContent\n    }, /*#__PURE__*/_react[\"default\"].createElement(_search[\"default\"], {\n      shape: \"simple\",\n      className: _index[\"default\"].searchContent,\n      onFilterChange: handleFilterChange,\n      onSearch: handleSearch,\n      filter: _FlowConstants.FILTER_TYPE,\n      filterValue: filterValue\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\n      primaryKey: \"deviceId\",\n      dataSource: loading ? [] : dataSource,\n      hasBorder: false,\n      emptyContent: empty,\n      loading: loading,\n      locale: (0, _locale[\"default\"])().Table\n    }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Host name').toString(),\n      dataIndex: \"hostName\",\n      width: 280,\n      cell: renderName\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('IP').toString(),\n      dataIndex: 'privateIp',\n      width: 160\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Has it been drilled').toString(),\n      dataIndex: \"isExperimented\",\n      width: 100,\n      cell: renderIsexperiment\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Version').toString(),\n      dataIndex: \"agentVersion\",\n      width: 100\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Start Time').toString(),\n      dataIndex: \"connectTime\",\n      width: 180,\n      cell: _DateUtil[\"default\"]\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Probe Status').toString(),\n      dataIndex: \"agentStatus\",\n      width: 80,\n      cell: renderStatus\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Operation').toString(),\n      lock: \"right\",\n      align: 'center',\n      width: 200,\n      cell: renderOption\n    })), /*#__PURE__*/_react[\"default\"].createElement(_pagination[\"default\"], {\n      className: _index[\"default\"].pagination,\n      current: page,\n      total: total,\n      pageSize: pageSize,\n      locale: (0, _locale[\"default\"])().Pagination,\n      onChange: function onChange(current) {\n        return setPage(current);\n      }\n    }), showManualDialog && /*#__PURE__*/_react[\"default\"].createElement(_ManualDialog[\"default\"], {\n      pluginType: pluginType,\n      isUninstall: isUninstall,\n      isInstall: isInstall,\n      configurationId: configurationId,\n      onClose: function onClose() {\n        return setShowManualDialog(false);\n      },\n      ostype: ostype\n    }));\n  };\n\n  var _default = HostTable;\n  _exports[\"default\"] = _default;\n});\n\n/***/ }),\n\n/***/ 2333:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = __webpack_require__(24596);\n\nvar _Object$defineProperty = __webpack_require__(67394);\n\nvar _WeakMap = __webpack_require__(93168);\n\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(23587);\n\nvar _Object$keys = __webpack_require__(83452);\n\nvar _Object$getOwnPropertySymbols = __webpack_require__(95315);\n\nvar _Object$getOwnPropertyDescriptors = __webpack_require__(63774);\n\nvar _Object$defineProperties = __webpack_require__(92937);\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(47701), __webpack_require__(57379), __webpack_require__(72153), __webpack_require__(81853), __webpack_require__(27378), __webpack_require__(66697), __webpack_require__(14798), __webpack_require__(52181), __webpack_require__(73262), __webpack_require__(96291), __webpack_require__(99328), __webpack_require__(14870), __webpack_require__(42058), __webpack_require__(87641), __webpack_require__(44255), __webpack_require__(39620)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var mod; }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports, _tab, _defineProperty2, _button, _slicedToArray2, _react, _Translation, _i18n, _index, _FlowConstants, _chaos, _sreUtils, _sreUtilsDva, _dva, _hostTable, _kubTable, _AutoInstall) {\n  \"use strict\";\n\n  var _interopRequireDefault = __webpack_require__(67971);\n\n  _Object$defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n\n  _exports[\"default\"] = void 0;\n  _tab = _interopRequireDefault(_tab);\n  _defineProperty2 = _interopRequireDefault(_defineProperty2);\n  _button = _interopRequireDefault(_button);\n  _slicedToArray2 = _interopRequireDefault(_slicedToArray2);\n  _react = _interopRequireWildcard(_react);\n  _Translation = _interopRequireDefault(_Translation);\n  _i18n = _interopRequireDefault(_i18n);\n  _index = _interopRequireDefault(_index);\n  _hostTable = _interopRequireDefault(_hostTable);\n  _kubTable = _interopRequireDefault(_kubTable);\n  _AutoInstall = _interopRequireDefault(_AutoInstall);\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof _WeakMap !== \"function\") return null; var cacheBabelInterop = new _WeakMap(); var cacheNodeInterop = new _WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = _Object$defineProperty && _Object$getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { _Object$defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n  var ScopesControl = function ScopesControl() {\n    var _getParams;\n\n    var dispatch = (0, _sreUtilsDva.useDispatch)();\n    var history = (0, _dva.useHistory)();\n    var type = (_getParams = (0, _sreUtils.getParams)('type')) !== null && _getParams !== void 0 ? _getParams : _FlowConstants.SCOPE_TYPE.HOST;\n\n    var _useState = (0, _react.useState)({}),\n        _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n        totalInfo = _useState2[0],\n        setTotalInfo = _useState2[1];\n\n    var _useState3 = (0, _react.useState)(false),\n        _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n        isAutoInstall = _useState4[0],\n        setIsAutoInstall = _useState4[1];\n\n    (0, _react.useEffect)(function () {\n      var probeManagement = _i18n[\"default\"].t('Probe Management');\n\n      dispatch.pageHeader.setTitle(probeManagement);\n      dispatch.pageHeader.setBreadCrumbItems(_chaos.CHAOS_DEFAULT_BREADCRUMB_ITEM.concat([// 修改面包屑\n      {\n        key: 'scope_control',\n        value: probeManagement,\n        path: '/chaos/scope/control'\n      }]));\n    }, []); // useEffect(() => {\n    //   setTab(Number(type) || 0);\n    // }, [ type ]);\n\n    function handleTabChange(type) {\n      (0, _sreUtils.pushUrl)(history, '/chaos/experiment/scope/control', {\n        type: type\n      });\n    }\n    /** 跳转到探针安装页面 */\n\n\n    function skipAgentManage() {\n      (0, _sreUtils.pushUrl)(history, '/chaos/agentmanage/setting/step', {\n        iis: 1\n      });\n    }\n\n    function renderExtra() {\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _index[\"default\"].extra\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, Number(type) === _FlowConstants.SCOPE_TYPE.HOST ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Number of online probes/total number of ECS\"), \":\", totalInfo[type] || '0/0') : /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Number of online probes/total number of Kubernetes nodes\"), \":\", totalInfo[type] || '0/0')), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          marginTop: '-4px'\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_button[\"default\"], {\n        type: 'primary',\n        onClick: function onClick() {\n          return setIsAutoInstall(true);\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Automatically install probes\")), \"\\xA0\\xA0\", /*#__PURE__*/_react[\"default\"].createElement(_button[\"default\"], {\n        type: 'primary',\n        onClick: function onClick() {\n          return (0, _sreUtils.pushUrl)(history, '/chaos/agentmanage/setting/step', {\n            iis: '1'\n          });\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Manually install probes\"))));\n    }\n    /** table 空数据展示信息 */\n\n\n    var emptyTable = /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"There are currently no probes\"), \"\\uFF0C\", /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _index[\"default\"].href,\n      onClick: skipAgentManage\n    }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Access now\")));\n    /** 更新 统计信息 */\n\n\n    var changeSuccessNumber = function changeSuccessNumber(flag, info) {\n      var newInfo = _objectSpread(_objectSpread({}, totalInfo), {}, (0, _defineProperty2[\"default\"])({}, flag, info));\n\n      setTotalInfo(newInfo);\n    };\n\n    var tableProps = {\n      currTab: Number(type) || 0,\n      changeSuccessNumber: changeSuccessNumber,\n      empty: emptyTable\n    };\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: _index[\"default\"].warp\n    }, /*#__PURE__*/_react[\"default\"].createElement(_tab[\"default\"], {\n      activeKey: type,\n      shape: \"wrapped\",\n      onChange: handleTabChange,\n      extra: renderExtra(),\n      navClassName: _index[\"default\"].tabStyle\n    }, /*#__PURE__*/_react[\"default\"].createElement(_tab[\"default\"].Item, {\n      title: _i18n[\"default\"].t('Host').toString(),\n      key: _FlowConstants.SCOPE_TYPE.HOST\n    }, /*#__PURE__*/_react[\"default\"].createElement(_hostTable[\"default\"], tableProps)), /*#__PURE__*/_react[\"default\"].createElement(_tab[\"default\"].Item, {\n      title: _i18n[\"default\"].t('Kubernetes').toString(),\n      key: _FlowConstants.SCOPE_TYPE.K8S\n    }, /*#__PURE__*/_react[\"default\"].createElement(_kubTable[\"default\"], tableProps))), isAutoInstall && /*#__PURE__*/_react[\"default\"].createElement(_AutoInstall[\"default\"], {\n      onClose: function onClose() {\n        return setIsAutoInstall(false);\n      }\n    }));\n  };\n\n  var _default = ScopesControl;\n  _exports[\"default\"] = _default;\n});\n\n/***/ }),\n\n/***/ 44255:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = __webpack_require__(24596);\n\nvar _Object$defineProperty = __webpack_require__(67394);\n\nvar _WeakMap = __webpack_require__(93168);\n\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(23587);\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(42499), __webpack_require__(17225), __webpack_require__(35049), __webpack_require__(77809), __webpack_require__(81853), __webpack_require__(6885), __webpack_require__(9644), __webpack_require__(27378), __webpack_require__(66697), __webpack_require__(14798), __webpack_require__(68055), __webpack_require__(98784), __webpack_require__(60042), __webpack_require__(52181), __webpack_require__(61253), __webpack_require__(73262), __webpack_require__(99328), __webpack_require__(42058), __webpack_require__(14870)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var mod; }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports, _table, _icon, _toConsumableArray2, _asyncToGenerator2, _slicedToArray2, _K8sRowRender, _ManualDialog, _react, _Translation, _i18n, _locale, _lodash, _classnames, _index, _consoleComponentsActions, _FlowConstants, _sreUtils, _dva, _sreUtilsDva) {\n  \"use strict\";\n\n  var _interopRequireDefault = __webpack_require__(67971);\n\n  _Object$defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n\n  _exports[\"default\"] = void 0;\n  _table = _interopRequireDefault(_table);\n  _icon = _interopRequireDefault(_icon);\n  _toConsumableArray2 = _interopRequireDefault(_toConsumableArray2);\n  _asyncToGenerator2 = _interopRequireDefault(_asyncToGenerator2);\n  _slicedToArray2 = _interopRequireDefault(_slicedToArray2);\n  _K8sRowRender = _interopRequireDefault(_K8sRowRender);\n  _ManualDialog = _interopRequireDefault(_ManualDialog);\n  _react = _interopRequireWildcard(_react);\n  _Translation = _interopRequireDefault(_Translation);\n  _i18n = _interopRequireDefault(_i18n);\n  _locale = _interopRequireDefault(_locale);\n  _lodash = _interopRequireDefault(_lodash);\n  _classnames = _interopRequireDefault(_classnames);\n  _index = _interopRequireDefault(_index);\n  _consoleComponentsActions = _interopRequireWildcard(_consoleComponentsActions);\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof _WeakMap !== \"function\") return null; var cacheBabelInterop = new _WeakMap(); var cacheNodeInterop = new _WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = _Object$defineProperty && _Object$getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { _Object$defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  var KubTable = function KubTable(props) {\n    var currTab = props.currTab,\n        empty = props.empty,\n        changeSuccessNumber = props.changeSuccessNumber;\n    var dispatch = (0, _sreUtilsDva.useDispatch)();\n\n    var _useState = (0, _react.useState)(false),\n        _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n    var _useState3 = (0, _react.useState)([]),\n        _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n        dataSource = _useState4[0],\n        setDataSource = _useState4[1]; // const [ page, setPage ] = useState(1);\n\n\n    var page = 1;\n\n    var _useState5 = (0, _react.useState)(0),\n        _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n        total = _useState6[0],\n        setTotal = _useState6[1];\n\n    var _useState7 = (0, _react.useState)([]),\n        _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n        openRowKeys = _useState8[0],\n        setOpenRowKeys = _useState8[1];\n\n    var _useState9 = (0, _react.useState)(false),\n        _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n        showManualDialog = _useState10[0],\n        setShowManualDialog = _useState10[1];\n\n    var _useState11 = (0, _react.useState)(''),\n        _useState12 = (0, _slicedToArray2[\"default\"])(_useState11, 2),\n        pluginType = _useState12[0],\n        setPluginType = _useState12[1];\n\n    var history = (0, _dva.useHistory)();\n    (0, _react.useEffect)(function () {\n      if (currTab !== _FlowConstants.SCOPE_TYPE.K8S) {\n        return;\n      }\n\n      getData();\n    }, [currTab, page]);\n    (0, _react.useEffect)(function () {\n      var total = 0;\n      var success = 0;\n\n      for (var i in dataSource) {\n        var _dataSource$i = dataSource[i],\n            nodeCount = _dataSource$i.nodeCount,\n            onlineCount = _dataSource$i.onlineCount;\n        total += nodeCount;\n        success += onlineCount;\n      }\n\n      changeSuccessNumber(currTab, \"\".concat(success, \"/\").concat(total));\n    }, [total]);\n\n    var getData = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$dispatch$scope, _yield$dispatch$scope2, Data, _len;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setLoading(true);\n                _context.next = 3;\n                return dispatch.scopesControl.getListExperimentClusters();\n\n              case 3:\n                _yield$dispatch$scope = _context.sent;\n                _yield$dispatch$scope2 = _yield$dispatch$scope.Data;\n                Data = _yield$dispatch$scope2 === void 0 ? [] : _yield$dispatch$scope2;\n                setDataSource(Data || []);\n                _len = Data === null || Data === void 0 ? void 0 : Data.length;\n                setTotal(_len);\n                setLoading(false);\n\n                if (_lodash[\"default\"].isEmpty(Data) && _len > 0) {\n                  handleRowExpanded(Data[0]);\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    function handleRowExpanded(record) {\n      var id = record.clusterId; // 如果有这行，则将它折叠\n\n      if (openRowKeys.includes(id)) {\n        setOpenRowKeys(openRowKeys.filter(function (key) {\n          return key !== id;\n        }));\n      } else {\n        openRowKeys.push(id);\n        setOpenRowKeys((0, _toConsumableArray2[\"default\"])(openRowKeys));\n      }\n    }\n\n    function expandedRowRender(record) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_K8sRowRender[\"default\"], {\n        data: record,\n        getData: getData\n      });\n    }\n\n    var renderAgentVersion = function renderAgentVersion(value) {\n      if (value) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n          type: \"select\",\n          className: (0, _classnames[\"default\"])(_index[\"default\"].onLineState, _index[\"default\"].icon)\n        }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Consistent\"));\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(_icon[\"default\"], {\n        type: \"exclamationcircle-f\",\n        className: (0, _classnames[\"default\"])(_index[\"default\"].icon, _index[\"default\"].offLineState)\n      }), /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"inconsistent\"));\n    }; // 手动卸载\n\n\n    var toggleManualDialog = function toggleManualDialog(pluginType) {\n      setShowManualDialog(!showManualDialog);\n      setPluginType(pluginType);\n    };\n\n    var renderAction = function renderAction(value, index, record) {\n      var clusterId = record.clusterId,\n          onlineCount = record.onlineCount,\n          pluginType = record.pluginType,\n          installMode = record.installMode;\n\n      var clickUninstallBtn = /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n        onClick: function onClick(e) {\n          toggleManualDialog(pluginType);\n          e.stopPropagation();\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Uninstall manually\"));\n\n      var toolBtn = /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions.LinkButton, {\n        onClick: function onClick(e) {\n          (0, _sreUtils.pushUrl)(history, '/chaos/agentmanage/setting/tools', {\n            id: clusterId,\n            mode: installMode\n          });\n          e.stopPropagation();\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_Translation[\"default\"], null, \"Install the drill tool\"));\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_consoleComponentsActions[\"default\"], null, onlineCount && onlineCount > 0 && clickUninstallBtn, toolBtn);\n    };\n\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: _index[\"default\"].tabContent\n    }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"], {\n      dataSource: dataSource || [],\n      hasBorder: false,\n      emptyContent: empty,\n      loading: loading,\n      expandedIndexSimulate: true,\n      primaryKey: \"clusterId\",\n      openRowKeys: openRowKeys,\n      expandedRowIndent: [0, 0],\n      onRowClick: handleRowExpanded,\n      onRowOpen: function onRowOpen(openRowKeys, currentRowKey, expanded, record) {\n        handleRowExpanded(record);\n      },\n      expandedRowRender: expandedRowRender,\n      locale: (0, _locale[\"default\"])().Table\n    }, /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Cluster ID').toString(),\n      dataIndex: \"clusterId\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Cluster name').toString(),\n      dataIndex: \"clusterName\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Number of cluster nodes').toString(),\n      dataIndex: \"nodeCount\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Node Probe Version Consistency').toString(),\n      dataIndex: \"agentConsistency\",\n      cell: renderAgentVersion\n    }), /*#__PURE__*/_react[\"default\"].createElement(_table[\"default\"].Column, {\n      title: _i18n[\"default\"].t('Operation').toString(),\n      cell: renderAction\n    })), showManualDialog && /*#__PURE__*/_react[\"default\"].createElement(_ManualDialog[\"default\"], {\n      pluginType: pluginType,\n      isUninstall: true,\n      isClusterUninstall: true,\n      onClose: function onClose() {\n        return setShowManualDialog(false);\n      }\n    }));\n  };\n\n  var _default = KubTable;\n  _exports[\"default\"] = _default;\n});\n\n/***/ }),\n\n/***/ 74590:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var _Object$defineProperty = __webpack_require__(67394);\n\n(function (global, factory) {\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, __webpack_require__(61320)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var mod; }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_exports, _moment) {\n  \"use strict\";\n\n  var _interopRequireDefault = __webpack_require__(67971);\n\n  _Object$defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n\n  _exports[\"default\"] = void 0;\n  _moment = _interopRequireDefault(_moment);\n\n  var formatDate = function formatDate(date) {\n    if (!date) {\n      return '';\n    }\n\n    return (0, _moment[\"default\"])(date).format('YYYY-MM-DD HH:mm:ss');\n  };\n\n  var _default = formatDate;\n  _exports[\"default\"] = _default;\n});\n\n/***/ }),\n\n/***/ 73805:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60994);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93476);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".index__warp__36Zri .index__tabStyle__iDOA5 {\\n    position: relative;\\n  }\\n\\n    .index__warp__36Zri .index__tabStyle__iDOA5 .next-tabs-tab {\\n      min-width: 118px !important;\\n      text-align: center;\\n    }\\n\\n    .index__warp__36Zri .index__tabStyle__iDOA5 .next-tabs-nav-extra {\\n      width: 77% !important;\\n      z-index: 5 !important;\\n    }\\n  .index__warp__36Zri .index__tabContent__bdo8t {\\n    margin-top: 8px;\\n  }\\n  .index__warp__36Zri .index__tabContent__bdo8t .index__searchContent__5Khmv {\\n      margin-bottom: 8px;\\n    }\\n  .index__warp__36Zri .index__tabContent__bdo8t .index__searchContent__5Khmv .next-search-input {\\n        width: 360px;\\n      }\\n  .index__warp__36Zri .index__href__hzb1z {\\n    color: #0070cc;\\n    cursor: pointer;\\n  }\\n  .index__warp__36Zri .index__href__hzb1z:hover {\\n      text-decoration: underline;\\n    }\\n  .index__warp__36Zri .index__extra__gdCJM {\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n  .index__warp__36Zri .index__pagination__PdFaW {\\n    margin-top: 8px;\\n    text-align: right;\\n  }\\n  .index__warp__36Zri .index__icon__8g2Mp {\\n    font-size: 14px;\\n    margin-right: 8px;\\n  }\\n  .index__warp__36Zri .index__icon__8g2Mp::before{\\n      font-size: 14px !important;\\n      width: 14px !important;\\n    }\\n  .index__warp__36Zri .index__onLineState__BIMgf {\\n    color: #1E8E3E;\\n  }\\n  .index__warp__36Zri .index__notInstall__eJaqN {\\n    color: #888;\\n  }\\n  .index__warp__36Zri .index__offLineState__nk8gz {\\n    color: #D93026;\\n  }\\n\\n.index__paginationK8s__YXp49 {\\n  margin: 8px 0px;\\n  text-align: right;\\n}\\n\\n.index__content__qHBtw .index__ml10__8lipo {\\n    margin-left: 10px;\\n  }\\n\\n.index__content__qHBtw .index__mr10__Pq3eQ {\\n    margin-right: 10px;\\n  }\\n\\n.index__content__qHBtw .index__red__xmT3P {\\n    color: red;\\n  }\\n\\n.index__content__qHBtw .index__v_a_b__KYB\\\\+i {\\n    vertical-align: bottom;\\n  }\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./pages/Chaos/ScopesControl/index.css\"],\"names\":[],\"mappings\":\"AACE;IACE,kBAAkB;EAWpB;;IATE;MACE,2BAA2B;MAC3B,kBAAkB;IACpB;;IAEA;MACE,qBAAqB;MACrB,qBAAqB;IACvB;EAGF;IACE,eAAe;EASjB;EAPE;MACE,kBAAkB;IAKpB;EAHE;QACE,YAAY;MACd;EAIJ;IACE,cAAc;IACd,eAAe;EAKjB;EAHE;MACE,0BAA0B;IAC5B;EAGF;IACE,aAAa;IACb,8BAA8B;EAChC;EAEA;IACE,eAAe;IACf,iBAAiB;EACnB;EAEA;IACE,eAAe;IACf,iBAAiB;EAMnB;EAJE;MACE,0BAA0B;MAC1B,sBAAsB;IACxB;EAGF;IACE,cAAc;EAChB;EAEA;IACE,WAAW;EACb;EAEA;IACE,cAAc;EAChB;;AAGF;EACE,eAAe;EACf,iBAAiB;AACnB;;AAIE;IACE,iBAAiB;EACnB;;AAEA;IACE,kBAAkB;EACpB;;AAEA;IACE,UAAU;EACZ;;AAEA;IACE,sBAAsB;EACxB\",\"sourcesContent\":[\".warp {\\n  .tabStyle {\\n    position: relative;\\n\\n    :global(.next-tabs-tab) {\\n      min-width: 118px !important;\\n      text-align: center;\\n    }\\n\\n    :global(.next-tabs-nav-extra) {\\n      width: 77% !important;\\n      z-index: 5 !important;\\n    }\\n  }\\n\\n  .tabContent {\\n    margin-top: 8px;\\n\\n    .searchContent {\\n      margin-bottom: 8px;\\n\\n      :global(.next-search-input) {\\n        width: 360px;\\n      }\\n    }\\n  }\\n\\n  .href {\\n    color: #0070cc;\\n    cursor: pointer;\\n\\n    &:hover {\\n      text-decoration: underline;\\n    }\\n  }\\n\\n  .extra {\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n\\n  .pagination {\\n    margin-top: 8px;\\n    text-align: right;\\n  }\\n\\n  .icon {\\n    font-size: 14px;\\n    margin-right: 8px;\\n\\n    &::before{\\n      font-size: 14px !important;\\n      width: 14px !important;\\n    }\\n  }\\n\\n  .onLineState {\\n    color: #1E8E3E;\\n  }\\n\\n  .notInstall {\\n    color: #888;\\n  }\\n\\n  .offLineState {\\n    color: #D93026;\\n  }\\n}\\n\\n.paginationK8s {\\n  margin: 8px 0px;\\n  text-align: right;\\n}\\n\\n.content {\\n\\n  .ml10 {\\n    margin-left: 10px;\\n  }\\n\\n  .mr10 {\\n    margin-right: 10px;\\n  }\\n\\n  .red {\\n    color: red;\\n  }\\n\\n  .v_a_b {\\n    vertical-align: bottom;\\n  }\\n\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"warp\": \"index__warp__36Zri\",\n\t\"tabStyle\": \"index__tabStyle__iDOA5\",\n\t\"tabContent\": \"index__tabContent__bdo8t\",\n\t\"searchContent\": \"index__searchContent__5Khmv\",\n\t\"href\": \"index__href__hzb1z\",\n\t\"extra\": \"index__extra__gdCJM\",\n\t\"pagination\": \"index__pagination__PdFaW\",\n\t\"icon\": \"index__icon__8g2Mp\",\n\t\"onLineState\": \"index__onLineState__BIMgf\",\n\t\"notInstall\": \"index__notInstall__eJaqN\",\n\t\"offLineState\": \"index__offLineState__nk8gz\",\n\t\"paginationK8s\": \"index__paginationK8s__YXp49\",\n\t\"content\": \"index__content__qHBtw\",\n\t\"ml10\": \"index__ml10__8lipo\",\n\t\"mr10\": \"index__mr10__Pq3eQ\",\n\t\"red\": \"index__red__xmT3P\",\n\t\"v_a_b\": \"index__v_a_b__KYB+i\"\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 52181:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1892);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_modules_typescript_loader_index_js_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_oneOf_3_use_2_node_modules_postcss_loader_dist_cjs_js_index_css_css_modules__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73805);\n\n            \n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_modules_typescript_loader_index_js_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_oneOf_3_use_2_node_modules_postcss_loader_dist_cjs_js_index_css_css_modules__WEBPACK_IMPORTED_MODULE_1__/* [\"default\"] */ .Z, options);\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_modules_typescript_loader_index_js_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_0_oneOf_3_use_2_node_modules_postcss_loader_dist_cjs_js_index_css_css_modules__WEBPACK_IMPORTED_MODULE_1__/* [\"default\"].locals */ .Z.locals || {});\n\n/***/ })\n\n}]);"],"mappings":"AAAA;AAwpDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;","sourceRoot":""}